{"version":3,"sources":["webpack:///./src/components/ha-switch.ts","webpack:///./src/data/webhook.ts","webpack:///./src/panels/config/ais_dom/ais-webhooks.ts","webpack:///./src/panels/config/ais_dom/dialog-manage-ais-cloudhook/show-dialog-manage-ais-cloudhook.ts","webpack:///./src/panels/config/ais_dom/ha-config-ais-dom-config-remote.js"],"names":["MwcSwitch","customElements","get","_decorate","customElement","_initialize","_MwcSwitch","HaSwitch","_MwcSwitch2","_getPrototypeOf2","_this","_classCallCheck","this","_len","arguments","length","args","Array","_key","_getPrototypeOf","call","apply","concat","_assertThisInitialized","_inherits","F","d","kind","decorators","query","key","value","_get","prototype","style","setProperty","classList","toggle","Boolean","_slot","assignedNodes","static","css","_templateObject","__webpack_require__","__webpack_exports__","fetchWebhooks","hass","callWS","type","AisWebhooks","_LitElement","_LitElement2","property","_localHooks","_fetchData","html","renderStyle","_renderBody","_this2","console","log","_templateObject3","map","entry","_templateObject4","webhook_id","_templateObject5","_templateObject6","name","domain","toLowerCase","_handleManageButton","_templateObject2","webhookId","element","webhookDialogParams","webhook","find","ent","fireEvent","dialogTag","dialogImport","Promise","all","e","then","bind","dialogParams","ev","currentTarget","parentElement","_showDialog","regeneratorRuntime","async","_context","prev","next","awrap","sent","stop","_templateObject7","LitElement","define","HaConfigAisDomControl","PolymerElement","ha_config_ais_dom_config_remote_templateObject","Object","isWide","showAdvanced","remoteInfo","String","remoteDomain","computed","remoteConnected","states","state","callService","entity_id","entityId"],"mappings":"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","file":"chunk.b705637ba20db8e47f9e.js","sourcesContent":["import { customElement, CSSResult, css, query } from \"lit-element\";\nimport \"@material/mwc-switch\";\nimport { style } from \"@material/mwc-switch/mwc-switch-css\";\n// tslint:disable-next-line\nimport { Switch } from \"@material/mwc-switch\";\nimport { Constructor } from \"../types\";\n// tslint:disable-next-line\nconst MwcSwitch = customElements.get(\"mwc-switch\") as Constructor<Switch>;\n\n@customElement(\"ha-switch\")\nexport class HaSwitch extends MwcSwitch {\n  @query(\"slot\") private _slot!: HTMLSlotElement;\n\n  protected firstUpdated() {\n    super.firstUpdated();\n    this.style.setProperty(\n      \"--mdc-theme-secondary\",\n      \"var(--switch-checked-color)\"\n    );\n    this.classList.toggle(\n      \"slotted\",\n      Boolean(this._slot.assignedNodes().length)\n    );\n  }\n\n  protected static get styles(): CSSResult[] {\n    return [\n      style,\n      css`\n        :host {\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n        }\n        .mdc-switch.mdc-switch--checked .mdc-switch__thumb {\n          background-color: var(--switch-checked-button-color);\n          border-color: var(--switch-checked-button-color);\n        }\n        .mdc-switch.mdc-switch--checked .mdc-switch__track {\n          background-color: var(--switch-checked-track-color);\n          border-color: var(--switch-checked-track-color);\n        }\n        .mdc-switch:not(.mdc-switch--checked) .mdc-switch__thumb {\n          background-color: var(--switch-unchecked-button-color);\n          border-color: var(--switch-unchecked-button-color);\n        }\n        .mdc-switch:not(.mdc-switch--checked) .mdc-switch__track {\n          background-color: var(--switch-unchecked-track-color);\n          border-color: var(--switch-unchecked-track-color);\n        }\n        :host(.slotted) .mdc-switch {\n          margin-right: 24px;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-switch\": HaSwitch;\n  }\n}\n","import { HomeAssistant } from \"../types\";\n\nexport interface Webhook {\n  webhook_id: string;\n  domain: string;\n  name: string;\n}\n\nexport const fetchWebhooks = (hass: HomeAssistant): Promise<Webhook[]> =>\n  hass.callWS({\n    type: \"webhook/list\",\n  });\n","import { html, LitElement, PropertyDeclarations, property } from \"lit-element\";\nimport \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport \"@polymer/paper-spinner/paper-spinner\";\nimport \"../../../components/ha-card\";\n\nimport { HomeAssistant } from \"../../../types\";\nimport { Webhook, fetchWebhooks } from \"../../../data/webhook\";\n\nimport { showManageCloudhookDialog } from \"./dialog-manage-ais-cloudhook/show-dialog-manage-ais-cloudhook\";\n\nexport class AisWebhooks extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() private _localHooks?: Webhook[];\n\n  static get properties(): PropertyDeclarations {\n    return {\n      hass: {},\n      _localHooks: {},\n    };\n  }\n\n  constructor() {\n    super();\n  }\n\n  public connectedCallback() {\n    super.connectedCallback();\n    this._fetchData();\n  }\n\n  protected render() {\n    return html`\n      ${this.renderStyle()}\n      <ha-card header=\"Wywołania zwrotne HTTP\">\n        <div class=\"card-content\">\n          Wywołania zwrotne HTTP (Webhook) używane są do udostępniania\n          powiadomień o zdarzeniach. Wszystko, co jest skonfigurowane do\n          uruchamiania przez wywołanie zwrotne, ma publicznie dostępny unikalny\n          adres URL, aby umożliwić wysyłanie danych do Asystenta domowego z\n          dowolnego miejsca. ${this._renderBody()}\n\n          <div class=\"footer\">\n            <a href=\"https://sviete.github.io/AIS-docs\" target=\"_blank\">\n              Dowiedz się więcej o zwrotnym wywołaniu HTTP.\n            </a>\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  private _renderBody() {\n    console.log(\"pobieranie\");\n    if (!this._localHooks) {\n      return html`\n        <div class=\"body-text\">Pobieranie…</div>\n      `;\n    }\n\n    if (this._localHooks.length === 1) {\n      return html`\n        <div class=\"body-text\">\n          Wygląda na to, że nie masz jeszcze zdefiniowanych żadnych wywołań\n          zwrotnych. Rozpocznij od skonfigurowania\n          <a href=\"/config/integrations\">\n            integracji opartej na wywołaniu zwrotnym\n          </a>\n          lub przez tworzenie\n          <a href=\"/config/automation/new\"> automatyzacji typu webhook </a>.\n        </div>\n      `;\n    }\n\n    return this._localHooks.map(\n      (entry) => html`\n        ${entry.webhook_id === \"aisdomprocesscommandfromframe\"\n          ? html`\n              <div></div>\n            `\n          : html`\n              <div class=\"webhook\" .entry=\"${entry}\">\n                <paper-item-body two-line>\n                  <div>\n                    ${entry.name}\n                    ${entry.domain === entry.name.toLowerCase()\n                      ? \"\"\n                      : ` (${entry.domain})`}\n                  </div>\n                  <div secondary>${entry.webhook_id}</div>\n                </paper-item-body>\n                <mwc-button @click=\"${this._handleManageButton}\">\n                  Pokaż\n                </mwc-button>\n              </div>\n            `}\n      `\n    );\n  }\n\n  private _showDialog(webhookId: string) {\n    const webhook = this._localHooks!.find(\n      (ent) => ent.webhook_id === webhookId\n    )!;\n    showManageCloudhookDialog(this, { webhook });\n  }\n\n  private _handleManageButton(ev: MouseEvent) {\n    const entry = (ev.currentTarget as any).parentElement.entry as Webhook;\n    this._showDialog(entry.webhook_id);\n  }\n\n  private async _fetchData() {\n    this._localHooks = await fetchWebhooks(this.hass!);\n  }\n\n  private renderStyle() {\n    return html`\n      <style>\n        .body-text {\n          padding: 8px 0;\n        }\n        .webhook {\n          display: flex;\n          padding: 4px 0;\n        }\n        .progress {\n          margin-right: 16px;\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n        }\n        .footer {\n          padding-top: 16px;\n        }\n        .body-text a,\n        .footer a {\n          color: var(--primary-color);\n        }\n      </style>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ais-webhooks\": AisWebhooks;\n  }\n}\n\ncustomElements.define(\"ais-webhooks\", AisWebhooks);\n","import { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { Webhook } from \"../../../../data/webhook\";\n\nexport interface WebhookDialogParams {\n  webhook: Webhook;\n}\n\nexport const showManageCloudhookDialog = (\n  element: HTMLElement,\n  webhookDialogParams: WebhookDialogParams\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-manage-ais-cloudhook\",\n    dialogImport: () =>\n      import(/* webpackChunkName: \"ais-webhook-manage-dialog\" */ \"./dialog-manage-ais-cloudhook\"),\n    dialogParams: webhookDialogParams,\n  });\n};\n","import \"@polymer/app-layout/app-header/app-header\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar\";\nimport \"@polymer/paper-icon-button/paper-icon-button\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../layouts/hass-subpage\";\nimport \"../../../resources/ha-style\";\n\nimport \"./ha-config-ais-dom-navigation\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport \"./ais-webhooks\";\nimport \"../../../components/ha-switch\";\n\n/*\n *\n */\nclass HaConfigAisDomControl extends PolymerElement {\n  static get template() {\n    return html`\n      <style include=\"iron-flex ha-style\">\n        .content {\n          padding-bottom: 32px;\n        }\n        a {\n          color: var(--primary-color);\n        }\n        .border {\n          margin: 32px auto 0;\n          border-bottom: 1px solid rgba(0, 0, 0, 0.12);\n          max-width: 1040px;\n        }\n        .narrow .border {\n          max-width: 640px;\n        }\n        .center-container {\n          @apply --layout-vertical;\n          @apply --layout-center-center;\n          height: 70px;\n        }\n        ha-card > div#ha-switch-id {\n          margin: -4px 0;\n          position: absolute;\n          right: 8px;\n          top: 32px;\n        }\n        .card-actions a {\n          text-decoration: none;\n        }\n      </style>\n\n      <hass-subpage header=\"Konfiguracja bramki AIS dom\">\n        <div class$=\"[[computeClasses(isWide)]]\">\n          <ha-config-section is-wide=\"[[isWide]]\">\n            <span slot=\"header\">Zdalny dostęp</span>\n            <span slot=\"introduction\"\n              >W tej sekcji możesz skonfigurować zdalny dostęp do bramki</span\n            >\n            <ha-card header=\"Szyfrowany tunel\">\n              <div id=\"ha-switch-id\">\n                <ha-switch\n                  checked=\"{{remoteConnected}}\"\n                  on-change=\"changeRemote\"\n                ></ha-switch>\n              </div>\n              <div class=\"card-content\">\n                Tunel zapewnia bezpieczne zdalne połączenie z Twoim urządzeniem\n                kiedy jesteś z dala od domu. Twoja bramka dostępna\n                [[remoteInfo]] z Internetu pod adresem\n                <a href=\"[[remoteDomain]]\" target=\"_blank\">[[remoteDomain]]</a>.\n                <div class=\"center-container\" style=\"height: 320px;\">\n                  <div\n                    style=\"text-align: center; margin-top: 10px;\"\n                    on-click=\"showBarcodeInfo\"\n                  >\n                    <img src=\"/local/dom_access_code.png\" />\n                  </div>\n                  Zeskanuj kod QR za pomocą aplikacji na telefonie.\n                </div>\n              </div>\n              <div class=\"card-actions\">\n                <a\n                  href=\"https://sviete.github.io/AIS-docs/docs/en/ais_bramka_remote_www_index.html\"\n                  target=\"_blank\"\n                >\n                  <mwc-button>Dowiedz się jak to działa</mwc-button>\n                </a>\n              </div>\n            </ha-card>\n\n            <ais-webhooks hass=\"[[hass]]\"></ais-webhooks>\n          </ha-config-section>\n        </div>\n      </hass-subpage>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      showAdvanced: Boolean,\n      remoteInfo: {\n        type: String,\n        value: \"jest\",\n      },\n\n      remoteDomain: {\n        type: String,\n        computed: \"_computeRemoteDomain(hass)\",\n      },\n\n      remoteConnected: {\n        type: Boolean,\n        computed: \"_computeRremoteConnected(hass)\",\n      },\n    };\n  }\n\n  _computeRemoteDomain(hass) {\n    return (\n      \"https://\" +\n      hass.states[\"sensor.ais_secure_android_id_dom\"].state +\n      \".paczka.pro\"\n    );\n  }\n\n  _computeRremoteConnected(hass) {\n    if (hass.states[\"input_boolean.ais_remote_access\"].state === \"on\") {\n      this.remoteInfo = \"jest\";\n      return true;\n    }\n    this.remoteInfo = \"będzie\";\n    return false;\n  }\n\n  changeRemote() {\n    this.hass.callService(\"input_boolean\", \"toggle\", {\n      entity_id: \"input_boolean.ais_remote_access\",\n    });\n  }\n\n  showBarcodeInfo() {\n    fireEvent(this, \"hass-more-info\", { entityId: \"camera.remote_access\" });\n  }\n}\n\ncustomElements.define(\"ha-config-ais-dom-config-remote\", HaConfigAisDomControl);\n"],"sourceRoot":""}