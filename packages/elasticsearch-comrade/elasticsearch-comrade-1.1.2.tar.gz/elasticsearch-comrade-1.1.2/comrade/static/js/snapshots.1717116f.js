(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["snapshots"],{"2f8c":function(e,t,a){},af56:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-layout",[a("v-flex",{staticClass:"pr-4",attrs:{xs7:""}},[a("v-header",{attrs:{sub:""}},[e._v("Snapshots")]),a("snapshot-list-table",{attrs:{repos:e.repos}})],1),a("v-flex",{staticClass:"pl-4",attrs:{xs5:""}},[a("v-header",{attrs:{sub:""}},[e._v("Create a snapshot")]),a("create-snapshot",{attrs:{repos:e.repos}})],1)],1)},s=[],i=a("4795"),r=a.n(i),o=a("b01f"),l={methods:{listRepos:function(){var e;return r.a.async((function(t){while(1)switch(t.prev=t.next){case 0:return this.$store.commit("startLoading"),t.next=3,r.a.awrap(Object(o["a"])("/api/v1/snapshot/list_repos"));case 3:return e=t.sent,this.$store.commit("stopLoading"),t.abrupt("return",e);case 6:case"end":return t.stop()}}),null,this)},listSnapshots:function(e){var t;return r.a.async((function(a){while(1)switch(a.prev=a.next){case 0:return this.$store.commit("startLoading"),a.next=3,r.a.awrap(Object(o["a"])("/api/v1/snapshot/".concat(e,"/list")));case 3:return t=a.sent,this.$store.commit("stopLoading"),a.abrupt("return",t);case 6:case"end":return a.stop()}}),null,this)},restore:function(e,t,a){return r.a.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(Object(o["b"])("/api/v1/snapshot/restore/".concat(e,"/").concat(t),a));case 2:case"end":return n.stop()}}))},createSnapshot:function(e,t,a){return r.a.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(Object(o["b"])("/api/v1/snapshot/create/".concat(e,"/").concat(t),a));case 2:case"end":return n.stop()}}))}}},c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("repo-selector",{attrs:{repos:e.repos},on:{select:e.loadRepo}}),a("v-dialog",{attrs:{width:"60%"},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[a("restore-form",{attrs:{repo:e.repo,snapshot:e.snapshot},on:{close:function(t){e.showDialog=!1}}})],1),a("v-data-table",{staticClass:"elevation-1 small-table",attrs:{headers:e.headers,items:e.snapshots,"item-key":"id","footer-props":{"items-per-page-options":[30,100,200]},"sort-by":"start_time_in_millis","sort-desc":!0},scopedSlots:e._u([{key:"item.start_time_in_millis",fn:function(t){var a=t.item;return[e._v(" "+e._s(e.fromNow(a.start_time_in_millis))+" ")]}},{key:"item.duration_in_millis",fn:function(t){var a=t.item;return[e._v(" "+e._s(parseInt(a.duration_in_millis/1e3))+"s ")]}},{key:"item.restore",fn:function(t){var n=t.item;return[a("v-btn",{attrs:{text:"",icon:"",small:""},on:{click:function(t){return e.showRestoreDialog(n)}}},[a("v-icon",{attrs:{small:""}},[e._v("settings_backup_restore")])],1)]}}])})],1)},u=[],p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",{staticClass:"headline green lighten-2",attrs:{"primary-title":""}},[e._v(" Restore from snapshot ")]),e.repo?a("div",{staticClass:"restore-form"},[a("v-layout",[a("v-flex",{staticClass:"pr-4",staticStyle:{flex:"1"}},[a("v-text-field",{attrs:{label:"Rename Pattern",placeholder:"index_(.+)"},model:{value:e.renamePattern,callback:function(t){e.renamePattern=t},expression:"renamePattern"}})],1),a("v-flex",{staticClass:"pr-4",staticStyle:{flex:"1"}},[a("v-text-field",{attrs:{label:"Rename Replacement",placeholder:"restored_index_$1"},model:{value:e.renameReplacement,callback:function(t){e.renameReplacement=t},expression:"renameReplacement"}})],1)],1),a("div",{staticClass:"mb-2 mt-4",staticStyle:{"font-size":"18px"}},[e._v("Restore Options")]),e._l(e.booleanOptions,(function(t){return a("doc-checkbox",{key:t.title,attrs:{doc:t.doc,label:t.title},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"option.value"}})})),a("div",{staticClass:"mt-4",staticStyle:{"font-size":"18px"}},[e._v("Choose indices")]),a("index-selector",{attrs:{indices:e.snapshot.indices},model:{value:e.selectedIndices,callback:function(t){e.selectedIndices=t},expression:"selectedIndices"}}),a("div",{staticClass:"mt-4",staticStyle:{"font-size":"18px"}},[e._v("Override index Settings")]),a("query-editor",{ref:"editor",attrs:{init:{"index.number_of_replicas":0}}})],2):e._e(),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"success",disabled:0===e.selectedIndices.length},on:{click:e.onRestore}},[e._v(" Restore ")])],1)],1)},d=[],h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-select",{attrs:{items:e.indices,label:"Select indices*",multiple:""},scopedSlots:e._u([{key:"prepend-item",fn:function(){return[a("v-list-item",{attrs:{ripple:""},on:{click:e.toggle}},[a("v-list-item-action",[a("v-icon",[e._v(e._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[e._v(" "+e._s(e.allSelected?"Unselect all":"Select All")+" ")])],1)],1)]},proxy:!0},{key:"selection",fn:function(t){var n=t.item,s=t.index;return[e.value.length===e.indices.length&&0===s?a("v-chip",[a("span",[e._v("ALL")])]):e._e(),e.value.length===e.indices.length&&0===s?a("span",{staticClass:"caption"},[e._v(" ("+e._s(e.value.length)+" indices) ")]):e.value.length!==e.indices.length?a("v-chip",[a("span",[e._v(e._s(n))])]):e._e()]}}]),model:{value:e.inner,callback:function(t){e.inner=t},expression:"inner"}})],1)},v=[],f={props:{indices:{type:Array,required:!0},value:{type:Array,required:!0}},computed:{inner:{get:function(){return this.value},set:function(e){this.$emit("input",e)}},allSelected:function(){return this.value.length===this.indices.length},likesSomeFruit:function(){return this.value.length>0&&!this.allSelected},icon:function(){return this.allSelected?"check_box":this.likesSomeFruit?"indeterminate_check_box":"check_box_outline_blank"}},methods:{toggle:function(){var e=this;this.$nextTick((function(){e.allSelected?e.inner=[]:e.inner=e.indices.slice()}))}}},b=f,m=a("2877"),_=a("6544"),g=a.n(_),x=a("cc20"),y=a("132d"),w=a("da13"),k=a("1800"),S=a("5d23"),O=a("b974"),V=Object(m["a"])(b,h,v,!1,null,"5492d4aa",null),I=V.exports;g()(V,{VChip:x["a"],VIcon:y["a"],VListItem:w["a"],VListItemAction:k["a"],VListItemContent:S["a"],VListItemTitle:S["c"],VSelect:O["a"]});var C=a("90bf"),j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-checkbox",{staticClass:"doc-checkbox",attrs:{"hide-details":""},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(" "+e._s(e.label)+" "),a("v-tooltip",{attrs:{bottom:"","max-width":"400px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-icon",e._g({staticClass:"ml-1",attrs:{size:"14",color:"secondary lighten-3"}},n),[e._v(" help_outline ")])]}}])},[a("span",[e._v(e._s(e.doc))])])]},proxy:!0}]),model:{value:e.internalValue,callback:function(t){e.internalValue=t},expression:"internalValue"}})},R=[],$={data:function(){return{internalValue:null}},created:function(){this.internalValue=this.value},props:{doc:{type:String,required:!0},label:{type:String,required:!0},value:{type:Boolean}},watch:{internalValue:function(e){this.$emit("input",e)}}},P=$,D=a("ac7c"),B=a("3a2f"),L=Object(m["a"])(P,j,R,!1,null,"739f2ed0",null),T=L.exports;g()(L,{VCheckbox:D["a"],VIcon:y["a"],VTooltip:B["a"]});var q={props:["snapshot","repo"],components:{IndexSelector:I,QueryEditor:C["a"],DocCheckbox:T},mixins:[l],data:function(){return{renamePattern:void 0,lol:!1,renameReplacement:void 0,booleanOptions:{partial:{title:"Partial",value:!1,doc:"By default, the entire restore operation will fail if one or more indices participating in the operation don’t have snapshots of all shards available. It can occur if some shards failed to snapshot for example. It is still possible to restore such indices by setting partial to true. Please note, that only successfully snapshotted shards will be restored in this case and all missing shards will be recreated empty."},include_global_state:{title:"Include global state",value:!0,doc:"By setting include_global_state to false it’s possible to prevent the cluster global state to be stored as part of the snapshot. By default, the entire snapshot will fail if one or more indices participating in the snapshot don’t have all primary shards available. This behaviour can be changed by setting partial to true."},include_aliases:{title:"Include aliases",value:!0,doc:"Set include_aliases to false to prevent aliases from being restored together with associated indices"},ignore_unavailable:{title:"Ignore unavailable",value:!1,doc:"The snapshot request also supports the ignore_unavailable option. Setting it to true will cause indices that do not exist to be ignored during snapshot creation. By default, when ignore_unavailable option is not set and an index is missing the snapshot request will fail. By setting include_global_state to false it’s possible to prevent the cluster global state to be stored as part of the snapshot. By default, the entire snapshot will fail if one or more indices participating in the snapshot don’t have all primary shards available. This behaviour can be changed by setting partial to true."}},selectedIndices:[]}},methods:{makeBody:function(){var e=JSON.parse,t=JSON.stringify;return e(t({indices:this.selectedIndices,partial:this.booleanOptions.partial.value,include_global_state:this.booleanOptions.include_global_state.value,include_aliases:this.booleanOptions.include_aliases.value,ignore_unavailable:this.booleanOptions.ignore_unavailable.value,rename_pattern:this.renamePattern,rename_replacement:this.rename_replacement,index_settings:this.$refs.editor.getQuery()}))},onRestore:function(){return r.a.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.a.awrap(this.restore(this.repo,this.snapshot.snapshot,this.makeBody()));case 2:this.$emit("close");case 3:case"end":return e.stop()}}),null,this)}}},A=q,E=(a("f8ce"),a("8336")),F=a("b0af"),z=a("99d9"),J=a("ce7e"),N=a("0e8f"),Q=a("a722"),H=a("2fa4"),U=a("8654"),G=Object(m["a"])(A,p,d,!1,null,"5fc0c2e0",null),K=G.exports;g()(G,{VBtn:E["a"],VCard:F["a"],VCardActions:z["a"],VCardTitle:z["c"],VDivider:J["a"],VFlex:N["a"],VLayout:Q["a"],VSpacer:H["a"],VTextField:U["a"]});var M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-combobox",{staticClass:"mb-2",attrs:{items:e.repos,label:"Select repository","item-text":"id"},on:{change:function(t){return e.$emit("select",t.id)}},scopedSlots:e._u([{key:"item",fn:function(t){t.index;var n=t.item;return[a("v-list-item-content",[a("v-chip",{attrs:{dark:"",label:"",small:""}},[e._v(e._s(n.id)+" "+e._s(n.location)+" ")])],1),a("v-list-item-action",[a("v-chip",{attrs:{dark:"",label:"",small:"",color:"success"}},[e._v(e._s(n.type.type))])],1)]}}])})},W=[],X={props:{repos:{type:Array,required:!0}}},Y=X,Z=a("2b5d"),ee=Object(m["a"])(Y,M,W,!1,null,"ae58b11c",null),te=ee.exports;g()(ee,{VChip:x["a"],VCombobox:Z["a"],VListItemAction:k["a"],VListItemContent:S["a"]});var ae=a("ef1b"),ne={props:{repos:{type:Array,required:!0}},mixins:[l],components:{RestoreForm:K,RepoSelector:te},methods:{showRestoreDialog:function(e){this.snapshot=e,this.showDialog=!0},fromNow:function(e){return Object(ae["a"])(e,{addSuffix:!0})},loadRepo:function(e){return r.a.async((function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,r.a.awrap(this.listSnapshots(e));case 4:this.snapshots=t.sent,this.repo=e;case 6:case"end":return t.stop()}}),null,this)}},data:function(){return{showDialog:!1,snapshots:[],repo:"",snapshot:{indices:[]},headers:[{text:"Id",value:"snapshot"},{text:"Started",value:"start_time_in_millis"},{text:"State",value:"state"},{text:"Took",value:"duration_in_millis"},{text:"Restore",value:"restore",sortable:!1}]}}},se=ne,ie=a("8fea"),re=a("169a"),oe=Object(m["a"])(se,c,u,!1,null,null,null),le=oe.exports;g()(oe,{VBtn:E["a"],VDataTable:ie["a"],VDialog:re["a"],VIcon:y["a"]});var ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("repo-selector",{attrs:{repos:e.repos},on:{select:function(t){return e.repo=t}}}),a("v-text-field",{attrs:{label:"Snapshot name*"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("index-selector",{attrs:{indices:Object.keys(e.indices)},model:{value:e.selectedIndices,callback:function(t){e.selectedIndices=t},expression:"selectedIndices"}}),e._l(e.booleanOptions,(function(t){return a("doc-checkbox",{key:t.title,attrs:{doc:t.doc,label:t.title},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"option.value"}})})),a("v-btn",{staticClass:"mt-6",attrs:{block:"",color:"success",disabled:0===e.selectedIndices.length||!e.name||!e.repo}},[e._v(" Create Snapshot ")])],2)},ue=[],pe=a("2f62");function de(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function he(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?de(Object(a),!0).forEach((function(t){ve(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):de(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ve(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var fe={components:{IndexSelector:I,DocCheckbox:T,RepoSelector:te},props:{repos:{type:Array,required:!0}},computed:he({},Object(pe["d"])(["indices"])),data:function(){return{selectedIndices:[],repo:null,name:null,booleanOptions:{partial:{title:"Partial",value:!1,doc:"By default, the entire snapshot will fail if one or more indices participating in the snapshot don’t have all primary shards available. This behaviour can be changed by setting partial to true."},include_global_state:{title:"Include global state",value:!0,doc:"By setting include_global_state to false it’s possible to prevent the cluster global state to be stored as part of the snapshot."},ignore_unavailable:{title:"Ignore unavailable",value:!1,doc:"By default, when ignore_unavailable option is not set and an index is missing the snapshot request will fail."}}}}},be=fe,me=Object(m["a"])(be,ce,ue,!1,null,"354c1fe4",null),_e=me.exports;g()(me,{VBtn:E["a"],VTextField:U["a"]});var ge=a("97b1"),xe={mixins:[l],components:{SnapshotListTable:le,CreateSnapshot:_e,VHeader:ge["a"]},created:function(){return r.a.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.a.awrap(this.listRepos());case 2:this.repos=e.sent;case 3:case"end":return e.stop()}}),null,this)},data:function(){return{repos:[]}}},ye=xe,we=Object(m["a"])(ye,n,s,!1,null,null,null);t["default"]=we.exports;g()(we,{VFlex:N["a"],VLayout:Q["a"]})},f8ce:function(e,t,a){"use strict";var n=a("2f8c"),s=a.n(n);s.a}}]);