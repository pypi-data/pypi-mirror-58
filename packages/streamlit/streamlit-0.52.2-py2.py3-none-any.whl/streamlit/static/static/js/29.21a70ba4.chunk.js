(window["webpackJsonpstreamlit-browser"]=window["webpackJsonpstreamlit-browser"]||[]).push([[29],{2675:function(e,t,a){},2700:function(e,t,a){"use strict";a.r(t);var r=a(35),s=a(7),n=a(10),o=a(12),l=a(11),i=a(13),c=a(0),d=a.n(c),p=a(68),u=a(9),g=a(2663),m=a(177);a(2675);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(a,!0).forEach(function(t){Object(r.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).handleFileRead=function(e,t){null!==e.target&&(e.target.result instanceof ArrayBuffer?a.props.widgetStateManager.sendUploadFileMessage(a.props.element.get("id"),t.name,t.lastModified,new Uint8Array(e.target.result)):console.warn("This file is not ArrayBuffer type.")),a.setState({status:"UPLOADING"})},a.dropHandler=function(e,t,r){var s=a.props.element.get("maxUploadSizeMb");t.length>0?a.setState({status:"ERROR",errorMessage:"".concat(t[0].type," files are not allowed")}):(a.setState({acceptedFiles:e,status:"READING"}),e.forEach(function(e){if(e.size/1024/1024<s){var t=new FileReader;t.onloadend=function(t){return a.handleFileRead(t,e)},t.readAsArrayBuffer(e)}else a.setState({status:"ERROR",errorMessage:"The max file size allowed is ".concat(s,"MB")})}))},a.reset=function(){a.setState({status:"READY",errorMessage:void 0,acceptedFiles:[]})},a.renderErrorMessage=function(){var e=a.state.errorMessage;return d.a.createElement("div",{className:"uploadStatus uploadError"},d.a.createElement("span",{className:"body"},d.a.createElement(p.a,{className:"icon",type:"warning"})," ",e),d.a.createElement(u.Button,{outline:!0,size:"sm",onClick:a.reset},"OK"))},a.renderUploadingMessage=function(){return d.a.createElement("div",{className:"uploadStatus uploadProgress"},d.a.createElement("span",{className:"body"},d.a.createElement(u.Spinner,{color:"secondary",size:"sm"})," Uploading..."),d.a.createElement(u.Button,{outline:!0,size:"sm",onClick:function(){a.setState({status:"UPLOADED",errorMessage:void 0}),a.props.widgetStateManager.sendDeleteUploadedFileMessage(a.props.element.get("id"))}},"Cancel"))},a.renderFileUploader=function(){var e=a.state,t=e.status,r=e.errorMessage,s=a.props.element.get("type").toArray().map(function(e){return"."+e}),n=m.d;return"UPLOADED"===t&&((n=O({},n)).ContentMessage=O({},n.ContentMessage),n.ContentMessage.style=O({},n.ContentMessage.style),n.ContentMessage.style.visibility="hidden",n.ContentMessage.style.overflow="hidden",n.ContentMessage.style.height="0.625rem"),d.a.createElement(d.a.Fragment,null,"UPLOADED"===t?d.a.createElement("div",{className:"uploadOverlay uploadDone"},d.a.createElement("span",{className:"body"},a.state.acceptedFiles[0].name)):null,d.a.createElement(g.FileUploader,{onDrop:a.dropHandler,errorMessage:r,accept:0===s.length?void 0:s,disabled:a.props.disabled,overrides:n}))},a.render=function(){var e=a.state.status,t=a.props.element.get("label");return d.a.createElement("div",{className:"Widget stFileUploader"},d.a.createElement("label",null,t),"ERROR"===e?a.renderErrorMessage():"UPLOADING"===e?a.renderUploadingMessage():a.renderFileUploader())},a.state={status:"READY",errorMessage:void 0,acceptedFiles:[]},a}return Object(i.a)(t,e),Object(n.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.element.get("progress");"UPLOADING"===this.state.status&&t>=100&&this.setState({status:"UPLOADED"})}}]),t}(d.a.PureComponent);a.d(t,"default",function(){return y})}}]);
//# sourceMappingURL=29.21a70ba4.chunk.js.map