{"version":3,"sources":["webpack:///./src/plugins/log/Header/styles.js","webpack:///./src/plugins/log/Header/Header.jsx","webpack:///./src/plugins/log/Header/index.js","webpack:///./src/plugins/log/LogTable/styles.js","webpack:///./src/plugins/log/state/shapes.js","webpack:///./src/plugins/log/LogTable/LogTable.jsx","webpack:///./src/plugins/log/LogTable/index.js","webpack:///./src/plugins/log/Log/styles.js","webpack:///./src/plugins/log/Log/index.jsx"],"names":["Wrapper","theme","breakpoints","up","Spacer","TextFieldWrapper","FilterField","TextField","ENTER_KEY","Header","arguments","state","open","lines","query","reload","props","connected","start","stop","clearLogs","handleLines","event","setState","target","value","handleQuery","handleKeyPress","which","handleRequestClose","anchorEl","undefined","handleMenuClick","currentTarget","this","onClick","Icon","Stop","text","PlayArrow","Typography","variant","color","FilterList","id","label","onChange","inputProps","onKeyPress","helperText","IconButton","MoreVert","Menu","onClose","MenuItem","type","ListItemIcon","ClearAll","Component","connect","log","dispatch","payload","actions","request","disconnect","clear","PropTypes","shape","timestamp","string","message","task","logLevel","plugin","hex","css","palette","Table","RVTable","LogTable","messages","height","width","rowCount","length","rowHeight","headerHeight","rowGetter","index","rowClassName","log_level","toLowerCase","dataKey","flexGrow","TableWrapper","LogPage","useInjectPageTitle","elevation"],"mappings":"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","file":"14.00ee3d30b7059989a989.js","sourcesContent":["import styled from '@emotion/styled';\nimport { TextField } from '@material-ui/core';\nexport const Wrapper = styled.div `\n  display: block;\n  ${({ theme }) => theme.breakpoints.up('sm')} {\n    display: flex;\n    align-items: baseline;\n  }\n`;\nexport const Spacer = styled.div `\n  flex: 1;\n`;\nexport const TextFieldWrapper = styled.div `\n  display: flex;\n  align-items: center;\n`;\nexport const FilterField = styled(TextField) `\n  margin-left: 1rem;\n  margin-right: 1rem;\n`;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Menu, MenuItem, TextField, Typography, IconButton, ListItemIcon } from '@material-ui/core';\nimport { FilterList, MoreVert, Stop, PlayArrow, ClearAll } from '@material-ui/icons';\nimport { Wrapper, Spacer, TextFieldWrapper, FilterField } from './styles';\nconst ENTER_KEY = 13;\nclass Header extends Component {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            open: false,\n            lines: '200',\n            query: '',\n        };\n        this.reload = () => {\n            const { connected, start, stop } = this.props;\n            const { lines, query } = this.state;\n            if (connected) {\n                stop();\n            }\n            start({ lines, query });\n        };\n        this.clearLogs = () => this.props.clearLogs();\n        this.handleLines = event => this.setState({ lines: event.target.value });\n        this.handleQuery = event => this.setState({ query: event.target.value });\n        this.handleKeyPress = event => event.which === ENTER_KEY && this.reload();\n        this.handleRequestClose = () => this.setState({\n            open: false,\n            anchorEl: undefined,\n        });\n        this.handleMenuClick = event => this.setState({\n            open: true,\n            anchorEl: event.currentTarget,\n        });\n    }\n    componentDidMount() {\n        this.reload();\n    }\n    componentWillUnmount() {\n        const { stop } = this.props;\n        stop();\n    }\n    render() {\n        const { connected, stop } = this.props;\n        const { anchorEl, open, query, lines } = this.state;\n        const helperText = 'Supports operators and, or, (), and \"str\"';\n        const { onClick, Icon, text } = connected\n            ? {\n                onClick: stop,\n                Icon: Stop,\n                text: 'Stop',\n            }\n            : {\n                onClick: this.reload,\n                Icon: PlayArrow,\n                text: 'Start',\n            };\n        return (<Wrapper>\n        <div>\n          <Typography variant=\"h6\">Server Log</Typography>\n          <Typography variant=\"subtitle1\" color=\"textSecondary\">\n            {connected ? 'Streaming' : 'Disconnected'}\n          </Typography>\n        </div>\n        <Spacer />\n        <TextFieldWrapper>\n          <FilterList />\n          <FilterField id=\"filter\" label=\"Filter\" value={query} onChange={this.handleQuery} inputProps={{\n            onKeyPress: this.handleKeyPress,\n        }} helperText={helperText}/>\n          <IconButton onClick={this.handleMenuClick}>\n            <MoreVert />\n          </IconButton>\n        </TextFieldWrapper>\n        <Menu id=\"log-menu\" anchorEl={anchorEl} open={open} onClose={this.handleRequestClose}>\n          <MenuItem>\n            <TextField id=\"lines\" label=\"Max Lines\" value={lines} onChange={this.handleLines} type=\"number\" inputProps={{\n            onKeyPress: this.handleKeyPress,\n        }}/>\n          </MenuItem>\n          <MenuItem onClick={this.clearLogs}>\n            <ListItemIcon>\n              <ClearAll />\n            </ListItemIcon>\n            Clear\n          </MenuItem>\n          <MenuItem onClick={onClick}>\n            <ListItemIcon>\n              <Icon />\n            </ListItemIcon>\n            {text}\n          </MenuItem>\n        </Menu>\n      </Wrapper>);\n    }\n}\nHeader.propTypes = {\n    start: PropTypes.func.isRequired,\n    stop: PropTypes.func.isRequired,\n    connected: PropTypes.bool.isRequired,\n    clearLogs: PropTypes.func.isRequired,\n};\nexport default Header;\n","import { connect } from 'react-redux';\nimport actions from 'plugins/log/state/actions';\nimport Header from './Header';\nexport function mapStateToProps({ log }) {\n    return {\n        connected: log.connected,\n    };\n}\nfunction mapDispatchToProps(dispatch) {\n    return {\n        start: payload => dispatch(actions.connect.request(payload)),\n        stop: () => dispatch(actions.disconnect()),\n        clearLogs: () => dispatch(actions.clear()),\n    };\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);\nexport { Header };\n","import styled from '@emotion/styled';\nimport { css } from '@emotion/core';\nimport { Table as RVTable } from 'react-virtualized';\nconst color = (theme, hex) => css `\n  ${theme.palette.type === 'light'\n    ? css `\n        background-color: ${hex};\n      `\n    : css `\n        color: ${hex};\n      `}\n`;\nexport const Table = styled(RVTable) `\n  font-size: 1rem;\n\n  & .error {\n    ${({ theme }) => color(theme, '#f2dede')};\n  }\n\n  & .critical {\n    ${({ theme }) => color(theme, '#f2dede')};\n  }\n\n  & .warning {\n    ${({ theme }) => color(theme, '#fcf8e3')};\n  }\n`;\n","import PropTypes from 'prop-types';\nexport const LogShape = PropTypes.shape({\n    timestamp: PropTypes.string,\n    message: PropTypes.string,\n    task: PropTypes.string,\n    logLevel: PropTypes.string,\n    plugin: PropTypes.string,\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { AutoSizer, Column } from 'react-virtualized';\nimport { LogShape } from 'plugins/log/state/shapes';\nimport 'react-virtualized/styles.css';\nimport { Table } from './styles';\nconst LogTable = ({ messages }) => (<AutoSizer>\n    {({ height, width }) => (<Table rowCount={messages.length} rowHeight={20} headerHeight={50} width={width} height={height} rowGetter={({ index }) => messages[index]} rowClassName={({ index }) => messages[index] && messages[index].log_level.toLowerCase()}>\n        <Column label=\"Time\" dataKey=\"timestamp\" width={100}/>\n        <Column label=\"Level\" dataKey=\"logLevel\" width={100}/>\n        <Column label=\"Plugin\" dataKey=\"plugin\" width={100}/>\n        <Column label=\"Task\" dataKey=\"task\" width={100}/>\n        <Column label=\"Message\" dataKey=\"message\" width={100} flexGrow={1}/>\n      </Table>)}\n  </AutoSizer>);\nLogTable.propTypes = {\n    messages: PropTypes.arrayOf(LogShape).isRequired,\n};\nexport default LogTable;\n","import { connect } from 'react-redux';\nimport LogTable from './LogTable';\nexport function mapStateToProps({ log }) {\n    return {\n        messages: log.messages,\n    };\n}\nexport default connect(mapStateToProps)(LogTable);\nexport { LogTable };\n","import styled from '@emotion/styled';\nexport const TableWrapper = styled.div `\n  width: initial;\n  flex: 1;\n`;\n","import React from 'react';\nimport { hot } from 'react-hot-loader/root';\nimport { PaperWrapper } from 'common/styles';\nimport { useInjectPageTitle } from 'core/layout/AppBar/hooks';\nimport Header from '../Header';\nimport LogTable from '../LogTable';\nimport { TableWrapper } from './styles';\nconst LogPage = () => {\n    useInjectPageTitle('Log');\n    return (<PaperWrapper elevation={4}>\n      <Header />\n      <TableWrapper>\n        <LogTable />\n      </TableWrapper>\n    </PaperWrapper>);\n};\nexport default hot(LogPage);\n"],"sourceRoot":""}